filter_table <- tibble(POA_CODE16=c("3000","2000"),State=c("VIC","NSW"))
library(tidyverse)
filter_table <- tibble(POA_CODE16=c("3000","2000"),State=c("VIC","NSW"))
cols <- colnames(filter_table)
load("~/Google Drive/GitHub/aussiemaps/inst/extdata/act_lga_loc_poa.rda")
state_names<- tribble(~State,-State_long,
"VIC","Victoria",
"NSW","New South Wales",
"ACT","Australian Capital Territory",
"QLD","Queensland",
"NT","Northern Territory",
"WA","Western Australia",
"SA","South Australia",
"TAS","Tasmania")
state_names<- tribble(~State,-State_long,
"VIC","Victoria",
"NSW","New South Wales",
"ACT","Australian Capital Territory",
"QLD","Queensland",
"NT","Northern Territory",
"WA","Western Australia",
"SA","South Australia",
"TAS","Tasmania")
state_names<- tribble(~State,~State_long,
"VIC","Victoria",
"NSW","New South Wales",
"ACT","Australian Capital Territory",
"QLD","Queensland",
"NT","Northern Territory",
"WA","Western Australia",
"SA","South Australia",
"TAS","Tasmania")
States  <- filter_table$State %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_long),State_long,State))
load_aussie_map <- function(filter_table){
cols <- colnames(filter_table)
States  <- filter_table$State %>%
left_join(state_names,by=State) %>%
mutate(State=if_else(!is.na(State_long),State_long,State))
)
States  <- filter_table$State %>%
left_join(state_names,by=State) %>%
mutate(State=if_else(!is.na(State_long),State_long,State))
States  <- filter_table %>% select(State)
left_join(state_names,by=State) %>%
mutate(State=if_else(!is.na(State_long),State_long,State))
filter_table %>% select(State)
filter_table %>% select(State) %>%
left_join(state_names,by=State)
filter_table %>% select(State) %>%
left_join(state_names,by="State")
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_long),State_long,State)) %>%
select(-State_long)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_long),State_long,State)) %>%
pull(-State)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_long),State_long,State)) %>%
pull(-State)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_long),State_long,State)) %>%
pull(-State)
cols <- colnames(filter_table %>% select(-State))
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State)
state_names<- tribble(~State_short,~State,
"VIC","Victoria",
"NSW","New South Wales",
"ACT","Australian Capital Territory",
"QLD","Queensland",
"NT","Northern Territory",
"WA","Western Australia",
"SA","South Australia",
"TAS","Tasmania")
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State)
filter_table %>% select(State) %>%
left_join(state_names,by="State")
filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State=if_else(!is.na(State_short),State_short,State))
filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State))
filter_table <- tibble(POA_CODE16=c("3000","2000"),State=c("Victoria","NSW"))
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State_new)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State_new)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(-State_new)
filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State))
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(State_new)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(State_new)
States  <- filter_table %>% select(State) %>%
left_join(state_names,by="State") %>%
mutate(State_new=if_else(!is.na(State_short),State_short,State)) %>%
pull(State_new)
load("inst/extdata/nsw_lga_loc_poa.rda")
rm(object)
datai<- load("inst/extdata/nsw_lga_loc_poa.rda")
loadRData <- function(fileName){
#loads an RData file, and returns it
load(fileName)
get(ls()[ls() != "fileName"])
}
datai<- loadRData("inst/extdata/nsw_lga_loc_poa.rda")
data <- map_df(States,function(x){
datai<- loadRData("inst/extdata/nsw_lga_loc_poa.rda")
})
datai<- loadRData("inst/extdata/nsw_lga_loc_poa.rda")
data <- map_df(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
datai
})
data <- map_df(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
class(datai) <- "data.frame"
datai
})
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
class(datai) <- "data.frame"
datai
})
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State) %>% mutate(check=TRUE)
cols <- colnames(cols_filter)
datai %>% left_joint(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State) %>% mutate(check=TRUE)
cols <- colnames(cols_filter)
datai %>% left_join(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State)
cols <- colnames(cols_filter)
cols_filter <- cols_filter %>% mutate(check=TRUE)
datai %>% left_join(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State)
cols <- colnames(cols_filter)
cols_filter <- cols_filter %>% mutate(check=TRUE)
datai %>% left_join(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
x <- "VIC"
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State)
cols <- colnames(cols_filter)
cols_filter <- cols_filter %>% mutate(check=TRUE)
datai %>% left_join(cols_filter, by=cols)
datai %>% left_join(cols_filter, by=cols)
datai %>% left_join(cols_filter, by=cols)
library(sf)
datai %>% left_join(cols_filter, by=cols)
datai %>% left_join(cols_filter, by=cols) %>% filter(check)
data <- map(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State)
cols <- colnames(cols_filter)
cols_filter <- cols_filter %>% mutate(check=TRUE)
datai %>% left_join(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
data <- map_df(States,function(x){
datai<- loadRData(str_c("inst/extdata/",tolower(x),"_lga_loc_poa.rda"))
cols_filter <- filter_table %>% select(-State)
cols <- colnames(cols_filter)
cols_filter <- cols_filter %>% mutate(check=TRUE)
datai %>% left_join(cols_filter, by=cols) %>% filter(check) %>% select(-check)
})
View(data)
eval("LGA")
substitute("LGA")
substitute("LGA")
substitute("LGA")
datai %>%
group_by(substitute("LGA"))
datai %>%
group_by(eval("LGA"))
datai %>%
group_by(vars(one_of("LGA")) %>%
summarise(.groups = "drop")
)
datai %>%
group_by(vars(any_of("LGA")))
datai %>%
group_by(vars(any_of("LGA"))) %>%
summarise(.groups = "drop")
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
devtools::check()
a <-tibble(State=1:2)
a %>% select(-State)
colnmanes(a %>% select(-State))
colnames(a %>% select(-State))
length(colnames(a %>% select(-State)))
devtools::check()
devtools::check()
devtools::check()
library(aussiemaps)
locations.table
locations.table %>% filter(LGA %in% c("Albury","Wodonga"))
locations.table %>% filter(LGA %in% c("Albury","Wodonga")) %>% select(LGA,State)
locations.table %>% filter(LGA %in% c("Albury","Wodonga")) %>% select(LGA,State) %>% unique(.)
filtert<- locations.table %>% filter(LGA %in% c("Albury","Wodonga")) %>% select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert)
devtools::check()
library(aussiemaps)
filtert<- locations.table %>% filter(LGA %in% c("Albury","Wodonga")) %>% select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert)
map
map <- load_aussie_map(filtert,aggregation="LOCALITY")
map
devtools::check()
library(aussiemaps)
map <- load_aussie_map(filtert,aggregation="LOCALITY")
devtools::check()
library(aussiemaps)
map <- load_aussie_map(filtert,aggregation="LOCALITY")
map %>% ggplot() + geom_sf(aes(fill=State))
map %>% ggplot() + geom_sf(aes(fill=LOCALITY))
map <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
aggregation<-c("LOCALITY","State")
length(aggregation)
aggregation=c("none")
aggregation=c("none")
devtools::check()
library(aussiemaps)
map <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
devtools::check()
map <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
library(aussiemaps)
map <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
map
map %>% ggplot() + geom_sf(aes(fill=State))
map %>% ggplot() + geom_sf(aes(fill=State,color="white"))
map %>% ggplot() + geom_sf(aes(fill=State),colour="white")
library(aussiemaps)
library(customthemes)
map %>% ggplot() + geom_sf(aes(fill=State),colour="white") + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Sydney")) %>%
select(LGA,State) %>% unique(.)
View(filtert)
map <- load_aussie_map(filtert,aggregation=c("LOCALITY","LGA"))
map %>% ggplot() + geom_sf(aes(fill=State),colour="white") + custom_map_theme()
View(map)
map %>% ggplot() + geom_sf(aes(fill=LOCALITY),colour="white") + custom_map_theme()
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=LOCALITY),colour="white") + custom_map_theme()
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Melbourne","Port Phillip","Stonnington")) %>%
select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Melbourne","Port Phillip","Stonnington","Yarra","Moreland")) %>%
select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Melbourne","Port Phillip","Stonnington","Yarra","Moreland","White Horse")) %>%
select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
View(map)
View(filtert)
locations.table
View(location.table)
View(location_table)
View(locations.table)
filtert<- locations.table %>%
filter(LGA %in% c("Melbourne","Port Phillip","Stonnington","Yarra","Moreland","Whitehorse")) %>%
select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
library(aussiemaps)
library(customthemes)
filtert<- locations.table %>%
filter(LGA %in% c("Melbourne","Port Phillip","Stonnington","Yarra","Moreland","Whitehorse")) %>%
select(LGA,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
map %>% ggplot() + geom_sf(aes(fill=POA_CODE16),colour="white") + custom_map_theme()
aggregation<-c("LOCALITY","State")
length(aggregation)
locations.table
filtert<- locations.table %>%
filter(LGA %in% c("Sydney")) %>%
select(LGA,State) %>% unique(.)
filtert<- locations.table %>%
filter(LGA %in% c("Sydney")) %>%
select(LGA,State) %>% unique(.)
library(aussiemaps)
library(customthemes)
library(tidyverse)
library(sf)
filtert<- locations.table %>%
filter(LGA %in% c("Sydney")) %>%
select(LGA,State) %>% unique(.)
View(filtert)
sydney <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
View(sydney)
sydney <- load_aussie_map(filtert)
View(sydney)
c <- sydney %>% st_cast("POLYGON")
c <- sydney %>% st_cast %>% MULTILINESTRING %>%st_cast("POLYGON")
c <- sydney %>% st_cast %>% st_cast("MULTILINESTRING") %>%st_cast("POLYGON")
View(c)
filtert<- locations.table %>%
filter(LOCALITY %in% c("Millers Point")) %>%
select(LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert)
c <- sydney %>% st_cast %>% st_cast("MULTILINESTRING") %>%st_cast("POLYGON")
sydney <- load_aussie_map(filtert)
View(sydney)
devtools::load_all(".")
filtert<- locations.table %>%
filter(LOCALITY %in% c("Millers Point")) %>%
select(LOCALITY,State) %>% unique(.)
sydney <- load_aussie_map(filtert)
View(sydney)
sydney %>% ggplot() + geom_sf(aes(fill=LGA),colour="white") + custom_map_theme()
library(ggmap)
library(leaflet)
leaflet() %>% addPolygons(data=sydney)
sydney <- st_transform(sydney,"WGS84")
leaflet() %>% addPolygons(data=sydney)
leaflet() %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons(data=sydney)
leaflet() %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons(data=sydney)
class(sydney)
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
aggregation<-c("LOCALITY","State")
sydney <- st_transform(sydney,"WGS84") %%> st_polygonize()
sydney <- st_transform(sydney,"WGS84") %>% st_polygonize()
sydney <- st_transform(sydney,"WGS84") %>% st_polygonize()
sydney <- load_aussie_map(filtert)
sydney <- st_transform(sydney,"WGS84") %>% st_polygonize()
sydney %>% st_geometry()
sydney %>% st_geometry()
st_geometry(sydney)<- st_geometry(sydney)
sydney
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
library(aussiemaps)
library(customthemes)
library(tidyverse)
library(sf)
library(leaflet)
filtert<- locations.table %>%
filter(LOCALITY %in% c("Millers Point")) %>%
select(LOCALITY,State) %>% unique(.)
map <- load_aussie_map(filtert,aggregation=c("POA_CODE16"))
sydney <- load_aussie_map(filtert)
sydney<- st_ex(sydney)
sydney <- st_transform(sydney,"WGS84") %>% st_polygonize()
sydney <- load_aussie_map(filtert)
sydney <- sydney %>% st_collection_extract("POLYGON")
View(sydney)
sydney
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
library(aussiemaps)
locations.table
sydney <- load_aussie_map(filtert)
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
filtert<- locations.table %>%
filter(LGA %in% c("Sydney")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert)
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons(color=LOCALITY)
sydney
sydney %>% gpplot() + geom_sf(aes(colour=LGA,fill=LOCALITY) + custom_map_theme()
)
sydney %>% gpplot() + geom_sf(aes(colour=LGA,fill=LOCALITY)) + custom_map_theme()
sydney %>% ggplot() + geom_sf(aes(colour=LGA,fill=LOCALITY)) + custom_map_theme()
locations.table %>% filter(LOCALITY=="Bondi")
filtert<- locations.table %>%
filter(LGA %in% c("Sydney","Waverley")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney %>% ggplot() + geom_sf(aes(colour=LGA,fill=LOCALITY)) + custom_map_theme()
View(filtert)
filtert<- locations.table %>%
filter(LGA %in% c("Albury","Wodonga")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert)
sydney %>% ggplot() + geom_sf(aes(colour=State,fill=LOCALITY)) + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Albury","Wodonga")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert,aggregation=c("LOCALITY"))
sydney %>% ggplot() + geom_sf(aes(colour=State,fill=LOCALITY)) + custom_map_theme()
sydney <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
sydney %>% ggplot() + geom_sf(aes(colour=State,fill=LOCALITY)) + custom_map_theme()
filtert<- locations.table %>%
filter(LGA %in% c("Adelaide")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
sydney %>% ggplot() + geom_sf(aes(colour=State,fill=LOCALITY)) + custom_map_theme()
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons(color=LOCALITY)
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
filtert<- locations.table %>%
filter(LGA %in% c("Albury","Wodonga")) %>%
select(LOCALITY,LGA,State) %>% unique(.)
sydney <- load_aussie_map(filtert,aggregation=c("LOCALITY","State"))
leaflet(sydney) %>%
addProviderTiles("CartoDB.Positron")  %>%
addPolygons()
